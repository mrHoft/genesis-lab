import{a as L}from"./chunk-OYVPCDVE.js";import{a as $}from"./chunk-QWVBYHIC.js";import{a as G}from"./chunk-MOMQEDRR.js";import{a as V}from"./chunk-6TD3QLD4.js";import{a as F}from"./chunk-X4YI4MQ5.js";import"./chunk-NZYCSRIY.js";import{e as R}from"./chunk-NF2NXLZV.js";import"./chunk-3UOA546C.js";import{$a as d,Ab as U,Ca as v,Q as m,Ra as x,Sa as S,Ta as D,V as C,Va as y,W as b,Wa as P,X as M,Xa as I,Y as T,Ya as s,Za as l,_a as f,ab as p,db as N,ea as u,fb as k,gb as E,hb as g,qb as a,ra as w,rb as c,ua as r,xb as O}from"./chunk-UNKFYFRK.js";var _=class i{title="Are you sure?";message="";result=U();onYes(){this.result.emit(!0)}onCancel(){this.result.emit(!1)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=v({type:i,selectors:[["app-confirmation"]],outputs:{result:"result"},decls:9,vars:2,consts:[[1,"title"],[1,"btns"],["type","button",1,"button",3,"click"]],template:function(e,n){e&1&&(d(0,"h3",0),a(1),p(),d(2,"p"),a(3),p(),d(4,"div",1)(5,"button",2),E("click",function(){return n.onYes()}),a(6,"Yes"),p(),d(7,"button",2),E("click",function(){return n.onCancel()}),a(8,"Cancel"),p()()),e&2&&(r(),c(n.title),r(2),c(n.message))},styles:[".title[_ngcontent-%COMP%]{margin-top:0;text-align:center}.btns[_ngcontent-%COMP%]{display:flex;column-gap:2rem;justify-content:center}"]})};var z=(i,t)=>t.id;function H(i,t){if(i&1){let e=N();s(0,"div",2),k("click",function(){let o=C(e).$implicit,h=g();return b(h.router.navigate([`/generator/${o.id}`]))}),s(1,"div"),a(2),l(),f(3,"img",3),s(4,"div",4)(5,"span"),a(6),l(),M(),s(7,"svg",5),f(8,"path",6),l()(),T(),s(9,"img",7),k("click",function(o){let h=C(e).$implicit,j=g();return o.stopPropagation(),b(j.handleRemove(h.id))}),l()()}if(i&2){let e=t.$implicit,n=g();r(2),c(n.formatDate(e.created_at)),r(),I("src",e.thumbnail,w),r(3),c(e.likes.length)}}function Z(i,t){if(i&1&&(s(0,"p"),a(1),l()),i&2){let e=t.$implicit;r(),c(e)}}function q(i,t){if(i&1&&y(0,Z,2,1,"p",null,D),i&2){let e=g();P(e.messageNothing())}}function J(i,t){i&1&&f(0,"app-loader")}var Y=class i{userService=m(V);galleryService=m(F);modalService=m(L);loading=u(!1);savings=u([]);totalRecords=u(0);router=m(R);messageNothing=O(()=>$.noSavings.split(`
`));ngOnInit(){this.loadPage(1)}loadPage(t){let e=this.userService.user()?.id;this.loading()||(this.loading.set(!0),this.galleryService.get(t,100,e).subscribe({next:n=>{this.savings.set(n.records),this.totalRecords.set(n.pagination.total),this.loading.set(!1)},error:()=>{this.loading.set(!1)}}))}formatDate(t){return new Date(t).toISOString().replace("T"," ").slice(0,19)}handleRemove(t){this.modalService.showComponent(_,{title:"Deletion",message:"Are you sure want to delete selected fractal?"}).then(e=>{e&&this.galleryService.remove(t).subscribe({next:()=>this.savings.update(n=>n.filter(o=>o.id!==t))})})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=v({type:i,selectors:[["app-savings"]],decls:7,vars:2,consts:[[1,"title"],[1,"item"],[1,"item",3,"click"],["alt","thumbnail","width","32","height","32",3,"src"],[1,"likes"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","currentColor"],["d","m12,22c-3.92-3.74-8.46-6.96-10.49-11.55C-1.22,3.94,7.65-1.13,12,4.29c4.35-5.41,13.22-.35,10.49,6.16-2.03,4.59-6.56,7.82-10.49,11.55Z"],["width","24","height","24","src","./assets/trash.svg","alt","trash",1,"trash",3,"click"]],template:function(e,n){if(e&1&&(s(0,"h3",0),a(1,"Savings"),l(),s(2,"div"),y(3,H,10,3,"div",1,z),x(5,q,2,0),x(6,J,1,0,"app-loader"),l()),e&2){let o=n.savings();r(3),P(o),r(2),S(o.length===0?5:-1),r(),S(n.loading()?6:-1)}},dependencies:[G],styles:["[_nghost-%COMP%]{min-height:calc(100dvh - 6rem)}.title[_ngcontent-%COMP%]{text-align:center}.item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;padding:.25rem .5rem;transition:background-color .25s linear;cursor:default}.item[_ngcontent-%COMP%]:hover{background-color:var(--color-accent60a)}.likes[_ngcontent-%COMP%]{display:flex;align-items:center;column-gap:.5rem}.trash[_ngcontent-%COMP%]{padding:4px;border-radius:var(--border-radius);background-color:var(--color20);transition:background-color .25s linear;cursor:pointer}.trash[_ngcontent-%COMP%]:hover{background-color:var(--color-accent50)}"]})};export{Y as PageUserSavings};
