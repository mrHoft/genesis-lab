import{$a as c,Ca as R,L as h,Q as w,U as v,V as d,W as m,X as g,Y as C,_,ab as f,bb as V,cb as M,db as k,ea as y,gb as p,ib as x,jb as O,kb as P,mb as T,wb as E,za as b}from"./chunk-KQCILP4R.js";var l=class r{componentRef=null;hostViewContainerRef=null;isVisible=y(!1);showComponent(t,e,n){if(this.clear(),!this.hostViewContainerRef)throw new Error("Modal host view container is not set.");let i=_.create({providers:[],parent:n??this.hostViewContainerRef.injector});if(this.componentRef=this.hostViewContainerRef.createComponent(t,{injector:i}),e&&this.componentRef.instance)for(let[o,a]of Object.entries(e)){let s=this.componentRef.instance;o in s&&(s[o]=a)}return this.isVisible.set(!0),new Promise(o=>{let s=this.componentRef.instance.result.subscribe(I=>{s.unsubscribe(),this.close(),o(I)}),j=v(i,()=>E(()=>{this.isVisible()||(j.destroy(),s.unsubscribe(),o(null))}))})}close(){this.clear(),this.isVisible.set(!1)}clear(){this.componentRef&&(this.componentRef.destroy(),this.componentRef=null),this.hostViewContainerRef?.clear()}setHostViewContainerRef(t){this.hostViewContainerRef=t}static \u0275fac=function(e){return new(e||r)};static \u0275prov=h({token:r,factory:r.\u0275fac,providedIn:"root"})};var D=["modalHost"],u=class r{modalService=w(l);isVisible=this.modalService.isVisible;host;ngOnInit(){this.modalService.setHostViewContainerRef(this.host)}ngOnDestroy(){this.modalService.clear()}close(){this.modalService.close()}handleClickOutside(t){let{target:e,currentTarget:n}=t;e===n&&(t.preventDefault(),this.close())}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=R({type:r,selectors:[["app-modal"]],viewQuery:function(e,n){if(e&1&&x(D,7,b),e&2){let i;O(i=P())&&(n.host=i.first)}},decls:8,vars:2,consts:[["modalHost",""],[1,"modal__overlay",3,"click"],[1,"modal__inner"],[1,"modal__close",3,"click"],["width","18","height","18","viewBox","0 0 18 18","xmlns","http://www.w3.org/2000/svg","fill","none","stroke","currentColor"],["x1","3","y1","3","x2","15","y2","15"],["x1","3","y1","15","x2","15","y2","3"]],template:function(e,n){if(e&1){let i=k();c(0,"div",1),p("click",function(a){return d(i),m(n.handleClickOutside(a))}),c(1,"div",2)(2,"div",3),p("click",function(){return d(i),m(n.close())}),g(),c(3,"svg",4),V(4,"line",5)(5,"line",6),f()(),C(),M(6,null,0),f()()}e&2&&T("hidden",!n.isVisible())},styles:[".modal__overlay[_ngcontent-%COMP%]{position:fixed;z-index:900;top:0;left:0;display:flex;width:100dvw;height:100dvh;align-items:center;justify-content:center;background-color:#00000080}.hidden[_ngcontent-%COMP%]{display:none}.modal__inner[_ngcontent-%COMP%]{position:relative;display:flex;min-width:22rem;flex-direction:column;align-items:center;justify-content:center;padding:1rem 1rem 1.5rem;border-radius:.75rem;margin:0 1rem;background-color:var(--color10);font-size:1rem}.modal__close[_ngcontent-%COMP%]{position:absolute;z-index:2;top:.5rem;right:.5rem;display:flex;width:2rem;height:2rem;flex-shrink:0;align-items:center;justify-content:center;margin-left:auto;background-color:inherit;cursor:pointer;transition:opacity .25s linear}.modal__close[_ngcontent-%COMP%]:hover{opacity:.6}.modal__close[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:1.5rem;height:1.5rem;filter:invert(var(--color-scheme))}@media (max-width: 430px){.modal__inner[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:unset;margin:0;overflow-y:auto}}"]})};export{l as a,u as b};
