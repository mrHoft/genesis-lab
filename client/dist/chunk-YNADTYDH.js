import{a as M,c as C,d as P,e as S,f as c,g as w,h as N,i as y,j as O,k as x}from"./chunk-MYAEOQXR.js";import{a}from"./chunk-QWVBYHIC.js";import{a as b}from"./chunk-TVGKWIY7.js";import{c as v}from"./chunk-N65F7NND.js";import{e as h}from"./chunk-2BJ5HPRD.js";import"./chunk-E4YH2Q2X.js";import{Ca as f,Q as l,Xa as g,Ya as e,Za as r,ea as d,fb as o,ob as s,pb as _,ua as m}from"./chunk-KQCILP4R.js";var E=class p{router=l(h);userService=l(b);errorMessage=d(null);messageService=l(v);clearError(){this.errorMessage.set(null)}form=new S({login:new c("",{nonNullable:!0}),password:new c("",{nonNullable:!0})});handleSubmit(){let i=this.form.getRawValue();this.userService.requestLogin(i).subscribe({error:n=>{n.status===401?this.errorMessage.set(a.unauthorized):this.errorMessage.set(a.unexpected)},next:()=>{this.router.navigate(["/"])}})}handleNewUser(){this.userService.requestNew().subscribe({error:i=>{i.status===401?this.errorMessage.set(a.unauthorized):this.errorMessage.set(a.unexpected)},next:()=>{this.router.navigate(["/"])}})}static \u0275fac=function(n){return new(n||p)};static \u0275cmp=f({type:p,selectors:[["app-login"]],decls:13,vars:3,consts:[[1,"login"],[1,"login__form",3,"ngSubmit","formGroup"],[1,"title"],["formControlName","login","placeholder","login*","required","",3,"input"],["formControlName","password","type","password","placeholder","password*","required","",3,"input"],[1,"form_error"],[1,"form_btns"],["type","submit",1,"button",3,"disabled"],[1,"sign","link",3,"click"]],template:function(n,t){n&1&&(e(0,"div",0)(1,"form",1),o("ngSubmit",function(){return t.handleSubmit()}),e(2,"h3",2),s(3,"Please authorize"),r(),e(4,"input",3),o("input",function(){return t.clearError()}),r(),e(5,"input",4),o("input",function(){return t.clearError()}),r(),e(6,"div",5),s(7),r(),e(8,"div",6)(9,"button",7),s(10,"Log in"),r()(),e(11,"div",8),o("click",function(){return t.handleNewUser()}),s(12,"New user"),r()()()),n&2&&(m(),g("formGroup",t.form),m(6),_(t.errorMessage()),m(2),g("disabled",t.form.invalid))},dependencies:[x,w,M,C,P,O,N,y],styles:["[_nghost-%COMP%]{width:100%;height:calc(100dvh - 6rem);display:flex;justify-content:center;align-items:center}.login[_ngcontent-%COMP%]{width:16rem;background-color:var(--color10);border-radius:.5rem;border:var(--border-thickness) solid var(--color30)}.login__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;row-gap:1rem;padding:1rem 2rem}.login__form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .login__form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:1rem}.title[_ngcontent-%COMP%]{text-align:center;margin-top:0}.form_btns[_ngcontent-%COMP%]{display:flex;justify-content:center}.form_error[_ngcontent-%COMP%]{font-size:smaller;color:red;height:1lh}.sign[_ngcontent-%COMP%]{text-align:center;cursor:pointer}"]})};export{E as PageLogin};
