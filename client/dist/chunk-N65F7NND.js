import{i as p}from"./chunk-E4YH2Q2X.js";import{L as d,a as u,b as g,ea as f,ia as l}from"./chunk-KQCILP4R.js";var c=class s{_messages=f([]);show(e,t="regular"){let n=Date.now(),o={id:n,content:e,mode:t,hidden:!1};this._messages.update(r=>[...r,o]),setTimeout(()=>{this._messages.update(r=>r.map(i=>i.id===n?g(u({},i),{hidden:!0}):i)),setTimeout(()=>{this._messages.update(r=>r.filter(i=>i.id!==n))},500)},5e3)}get messages(){return this._messages.asReadonly()}static \u0275fac=function(t){return new(t||s)};static \u0275prov=d({token:s,factory:s.\u0275fac,providedIn:"root"})};var w="https://genesis-lab.deno.dev/api";var a=class s{static _instance;static STORE_NAME="genesis-lab";_state={};constructor(){if(s._instance)return s._instance;if(s._instance=this,typeof localStorage<"u"){let e=localStorage.getItem(s.STORE_NAME);e&&(this._state=JSON.parse(e))}}get(e){return this.getValue(e)}set(e,t){if(typeof t=="function"){let n=this.getValue(e);this.setValue(e,t(n))}else this.setValue(e,t);this.emit()}push(e,t){let n=this.getValue(e);if(n){if(!Array.isArray(n))throw new Error(`${e} is not an array`);this.setValue(e,[...n,t])}else this.setValue(e,[t]);this.emit()}getState(){return this._state}setState(e){this._state=e(this._state),this.emit()}clearState(){this._state={},this.emit()}emit(){typeof globalThis.window=="object"&&localStorage.setItem(s.STORE_NAME,JSON.stringify(this._state))}setValue=(e,t)=>{let n=this._state,o=e.split("."),r=o.pop();o.forEach(i=>{n[i]||(n[i]={}),n=n[i]}),r&&(n[r]=t)};getValue=e=>e.split(".").reduce((t,n)=>t&&t[n]!==void 0?t[n]:void 0,this._state)};var m=class s extends a{static PATH="user";set user(e){this.set(s.PATH,e)}get user(){return this.get(s.PATH)}};var h=class s extends c{showMessage=({message:e,error:t})=>{if(e)this.show(e);else if(t){let n=t instanceof p?t.error.error||t.error.message:t instanceof Error?t.message:String(t);console.log(n),this.show(n,"error")}};static \u0275fac=(()=>{let e;return function(n){return(e||(e=l(s)))(n||s)}})();static \u0275prov=d({token:s,factory:s.\u0275fac,providedIn:"root"})},A=s=>s instanceof p?s.error.error||s.error.message:s instanceof Error?s.message:String(s);export{w as a,m as b,c,A as d};
